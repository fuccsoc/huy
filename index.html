<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      const ol = () => {
        console.log(window.Telegram.WebApp.initDataUnsafe);
        document.getElementById("huyy").addEventListener("click", () => {
          const log = document.getElementById("log").value;
          const pass = document.getElementById("pass").value;
          const fd = new FormData();
          fd.append("username", log);
          fd.append("password", pass);
          const ft = fetch("https://api.espasatel.com/auth/login", {
            method: "POST",
            body: fd,
          }).then((res) => {
            console.log(
              res.json().then((token) => {
                window.Telegram.WebApp.openTelegramLink(
                  encodeURI(
                    "https://t.me/espasatelbot?start=" + token.access_token
                  )
                );
              })
            );
          });
        });
      };
      window.onload = ol;
    </script>
  </head>
  <body>
    <p>log</p>
    <input id="log" />
    <p>pass</p>
    <input id="pass" />
    <button id="huyy">Click me</button>
  </body>
</html>
